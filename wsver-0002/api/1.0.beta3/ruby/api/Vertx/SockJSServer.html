<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Vertx::SockJSServer
  
    &mdash; vert.x Ruby API
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Vertx.html" title="Vertx (module)">Vertx</a></span></span>
     &raquo; 
    <span class="title">SockJSServer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Vertx::SockJSServer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Vertx::SockJSServer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">src/main/ruby/core/sock_js.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
This is an implementation of the server side part of
<a href="&quot;https://github.com/sockjs&quot;" target="_parent" title="&amp;quot;https://github.com/sockjs&amp;quot;">&quot;https://github.com/sockjs&quot;</a>
</p>
<p>
SockJS enables browsers to communicate with the server using a simple
WebSocket-like api for sending and receiving messages. Under the bonnet
SockJS chooses to use one of several protocols depending on browser
capabilities and what apppears to be working across the network.
</p>
<p>
Available protocols include:
</p>
<p>
WebSockets xhr-polling xhr-streaming json-polling event-source html-file
</p>
<p>
This means, it should just work irrespective of what browser is being used,
and whether there are nasty things like proxies and load balancers between
the client and the server.
</p>
<p>
For more detailed information on SockJS, see their website.
</p>
<p>
On the server side, you interact using instances of <span class='object_link'><a href="SockJSSocket.html" title="Vertx::SockJSSocket (class)">SockJSSocket</a></span> - this
allows you to send data to the client or receive data via the
<span class='object_link'><a href="ReadStream.html#data_handler-instance_method" title="Vertx::ReadStream#data_handler (method)">ReadStream#data_handler</a></span>.
</p>
<p>
You can register multiple applications with the same SockJSServer, each
using different path prefixes, each application will have its own handler,
and configuration is described in a Hash.
</p>


  </div>
</div>
<div class="tags">
  <h3>Author:</h3>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>
<a href="http://tfox.org" target="_parent" title="Tim Fox">Tim Fox</a>
</p>
</div>
      
    </li>
  
</ul>

</div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (SockJSServer) <strong>initialize</strong>(http_server) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create a new SockJSServer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#install_app-instance_method" title="#install_app (instance method)">- (Object) <strong>install_app</strong>(config, proc = nil, &amp;hndlr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Install an application.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Vertx::SockJSServer (class)">SockJSServer</a></span></tt>) <strong>initialize</strong>(http_server) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create a new SockJSServer
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>http_server</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="HttpServer.html" title="Vertx::HttpServer (class)">HttpServer</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
You must pass in an instance of <span class='object_link'><a href="HttpServer.html" title="Vertx::HttpServer (class)">HttpServer</a></span>
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/main/ruby/core/sock_js.rb', line 50</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='http_server identifier id'>http_server</span><span class='rparen token'>)</span>
  <span class='@j_server ivar id'>@j_server</span> <span class='assign token'>=</span> <span class='org identifier id'>org</span><span class='dot token'>.</span><span class='vertx identifier id'>vertx</span><span class='dot token'>.</span><span class='java identifier id'>java</span><span class='dot token'>.</span><span class='core identifier id'>core</span><span class='dot token'>.</span><span class='sockjs identifier id'>sockjs</span><span class='dot token'>.</span><span class='SockJSServer constant id'>SockJSServer</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='http_server identifier id'>http_server</span><span class='dot token'>.</span><span class='_to_java_server identifier id'>_to_java_server</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="install_app-instance_method">
  
    - (<tt>Object</tt>) <strong>install_app</strong>(config, proc = nil, &amp;hndlr) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Install an application
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Configuration for the application
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>proc</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
Proc representing the handler
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>hndlr</span>
      
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Handler to call when a new <span class='object_link'><a href="SockJSSocket.html" title="Vertx::SockJSSocket (class)">is created</a></span>
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/main/ruby/core/sock_js.rb', line 58</span>

<span class='def def kw'>def</span> <span class='install_app identifier id'>install_app</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='comma token'>,</span> <span class='proc identifier id'>proc</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='hndlr identifier id'>hndlr</span><span class='rparen token'>)</span>
  <span class='hndlr identifier id'>hndlr</span> <span class='assign token'>=</span> <span class='proc identifier id'>proc</span> <span class='if if_mod kw'>if</span> <span class='proc identifier id'>proc</span>

  <span class='j_config identifier id'>j_config</span> <span class='assign token'>=</span> <span class='org identifier id'>org</span><span class='dot token'>.</span><span class='vertx identifier id'>vertx</span><span class='dot token'>.</span><span class='java identifier id'>java</span><span class='dot token'>.</span><span class='core identifier id'>core</span><span class='dot token'>.</span><span class='sockjs identifier id'>sockjs</span><span class='dot token'>.</span><span class='AppConfig constant id'>AppConfig</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

  <span class='prefix identifier id'>prefix</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>&quot;prefix&quot;</span><span class='rbrack token'>]</span>
  <span class='j_config identifier id'>j_config</span><span class='dot token'>.</span><span class='setPrefix identifier id'>setPrefix</span><span class='lparen token'>(</span><span class='prefix identifier id'>prefix</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='prefix identifier id'>prefix</span>
  <span class='jsessionid identifier id'>jsessionid</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>&quot;insert_JSESSIONID&quot;</span><span class='rbrack token'>]</span>
  <span class='j_config identifier id'>j_config</span><span class='dot token'>.</span><span class='setInsertJSESSIONID identifier id'>setInsertJSESSIONID</span><span class='lparen token'>(</span><span class='jsessionid identifier id'>jsessionid</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='jsessionid identifier id'>jsessionid</span>
  <span class='session_timeout identifier id'>session_timeout</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>&quot;session_timeout&quot;</span><span class='rbrack token'>]</span>
  <span class='j_config identifier id'>j_config</span><span class='dot token'>.</span><span class='setSessionTimeout identifier id'>setSessionTimeout</span><span class='lparen token'>(</span><span class='session_timeout identifier id'>session_timeout</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='session_timeout identifier id'>session_timeout</span>
  <span class='heartbeat_period identifier id'>heartbeat_period</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>&quot;heartbeat_period&quot;</span><span class='rbrack token'>]</span>
  <span class='j_config identifier id'>j_config</span><span class='dot token'>.</span><span class='setHeartbeatPeriod identifier id'>setHeartbeatPeriod</span><span class='lparen token'>(</span><span class='heartbeat_period identifier id'>heartbeat_period</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='heartbeat_period identifier id'>heartbeat_period</span>
  <span class='max_bytes_streaming identifier id'>max_bytes_streaming</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>&quot;max_bytes_streaming&quot;</span><span class='rbrack token'>]</span>
  <span class='j_config identifier id'>j_config</span><span class='dot token'>.</span><span class='setMaxBytesStreaming identifier id'>setMaxBytesStreaming</span><span class='lparen token'>(</span><span class='max_bytes_streaming identifier id'>max_bytes_streaming</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='max_bytes_streaming identifier id'>max_bytes_streaming</span>
  <span class='library_url identifier id'>library_url</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='string val'>&quot;library_url&quot;</span><span class='rbrack token'>]</span>
  <span class='j_config identifier id'>j_config</span><span class='dot token'>.</span><span class='setLibraryURL identifier id'>setLibraryURL</span><span class='lparen token'>(</span><span class='library_url identifier id'>library_url</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='library_url identifier id'>library_url</span>

  <span class='comment val'># TODO disabled transports</span>

  <span class='@j_server ivar id'>@j_server</span><span class='dot token'>.</span><span class='installApp identifier id'>installApp</span><span class='lparen token'>(</span><span class='j_config identifier id'>j_config</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='j_sock identifier id'>j_sock</span><span class='bitor op'>|</span>
    <span class='hndlr identifier id'>hndlr</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='SockJSSocket constant id'>SockJSSocket</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='j_sock identifier id'>j_sock</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Tue Mar 13 16:43:35 2012 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.8.7).
</div>

  </body>
</html>