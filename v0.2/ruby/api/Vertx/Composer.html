<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Vertx::Composer
  
    &mdash; vert.x Ruby API
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Vertx.html" title="Vertx (module)">Vertx</a></span></span>
     &raquo; 
    <span class="title">Composer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Vertx::Composer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Vertx::Composer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">src/main/ruby/core/composition.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Composer allows asynchronous control flows to be defined.
</p>
<p>
This is useful when you have some asynchronous actions to be performed
after other actions have completed. In a asynchronous framework such as
vert.x you cannot just block on the result of one action before executing
the next one, since an event loop thread must never block. By using
Composer you can describe the execution order of a sequence of actions in a
quasi-direct way, even though when they execute it will all be
asynchronous.
</p>
<p>
Each action to execute is represented by a block or a Proc. You can think
of these as &quot;thunks&quot;. Each block or Proc can return a Future
instance. If it does return a Future then the action represented by that
block is not considered complete until that Future completes.
</p>
<p>
An example of using this class is as follows:
</p>
<p>
In the above example, when <span class='object_link'><a href="#execute-instance_method" title="Vertx::Composer#execute (method)">#execute</a></span> is invoked, &quot;copying&quot; will
be printed and immediately the filesystem copy from &quot;from&quot; to
&quot;to&quot; will start, since both these actions are declared to run in
parallel. Some time later the copy will complete, and since the
&quot;copying&quot; action completed immediately the next set of actions
will be executed. This will result in &quot;copy complet&quot; being
displayed and immediately the redis key &quot;key&quot; will be set to
&quot;val1&quot;. When the operation to set the redis key is complete, the
next action will be executed and &quot;set value ok&quot; will be
displayed. Once this is complete, the value of the key previously set is
retrieved and the future result of getting it is represented by future.
Some time later when the value is actually got, &quot;value of key1 is
val&quot; is displayed.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">
<span class='comp identifier id'>comp</span> <span class='assign token'>=</span> <span class='new identifier id'>new</span> <span class='Composer constant id'>Composer</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='parallel identifier id'>parallel</span><span class='lbrace token'>{</span> <span class='puts identifier id'>puts</span> <span class='string val'>&quot;copying&quot;</span> <span class='rbrace token'>}</span>
<span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='parallel identifier id'>parallel</span><span class='lbrace token'>{</span> <span class='FileSystem constant id'>FileSystem</span><span class='colon2 op'>::</span><span class='copy identifier id'>copy</span><span class='lparen token'>(</span><span class='string val'>&quot;from&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;to&quot;</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
<span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='series identifier id'>series</span><span class='lbrace token'>{</span> <span class='puts identifier id'>puts</span> <span class='string val'>&quot;copy complete&quot;</span> <span class='rbrace token'>}</span>
<span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='parallel identifier id'>parallel</span><span class='lbrace token'>{</span> <span class='redis_connection identifier id'>redis_connection</span><span class='dot token'>.</span><span class='set identifier id'>set</span><span class='lparen token'>(</span><span class='string val'>&quot;key1&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;val1&quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='series identifier id'>series</span><span class='lbrace token'>{</span> <span class='puts identifier id'>puts</span> <span class='string val'>&quot;set value ok&quot;</span> <span class='rbrace token'>}</span>
<span class='future identifier id'>future</span> <span class='assign token'>=</span> <span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='series identifier id'>series</span><span class='lbrace token'>{</span> <span class='redis_connection identifier id'>redis_connection</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='string val'>&quot;key1&quot;</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
<span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='series identifier id'>series</span><span class='lbrace token'>{</span> <span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;value of key1 is #{future.result}&quot;</span> <span class='rbrace token'>}</span>
<span class='comp identifier id'>comp</span><span class='dot token'>.</span><span class='execute identifier id'>execute</span>
</pre>
    
  </div>
<h3>Author:</h3>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>
<a href="http://tfox.org" target="_parent" title="Tim Fox">Tim Fox</a>
</p>
</div>
      
    </li>
  
</ul>

</div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exception_handler-instance_method" title="#exception_handler (instance method)">- (Object) <strong>exception_handler</strong>(proc = nil, &amp;hndlr) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">- (Object) <strong>execute</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Composer) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Composer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parallel-instance_method" title="#parallel (instance method)">- (Object) <strong>parallel</strong>(proc = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#series-instance_method" title="#series (instance method)">- (Object) <strong>series</strong>(proc = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Vertx::Composer (class)">Composer</a></span></tt>) <strong>initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Composer
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/main/ruby/core/composition.rb', line 142</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span>
  <span class='@j_comp ivar id'>@j_comp</span> <span class='assign token'>=</span> <span class='org identifier id'>org</span><span class='dot token'>.</span><span class='vertx identifier id'>vertx</span><span class='dot token'>.</span><span class='java identifier id'>java</span><span class='dot token'>.</span><span class='core identifier id'>core</span><span class='dot token'>.</span><span class='composition identifier id'>composition</span><span class='dot token'>.</span><span class='Composer constant id'>Composer</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="exception_handler-instance_method">
  
    - (<tt>Object</tt>) <strong>exception_handler</strong>(proc = nil, &amp;hndlr) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/main/ruby/core/composition.rb', line 162</span>

<span class='def def kw'>def</span> <span class='exception_handler identifier id'>exception_handler</span><span class='lparen token'>(</span><span class='proc identifier id'>proc</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='hndlr identifier id'>hndlr</span><span class='rparen token'>)</span>
  <span class='hndlr identifier id'>hndlr</span> <span class='assign token'>=</span> <span class='proc identifier id'>proc</span> <span class='if if_mod kw'>if</span> <span class='proc identifier id'>proc</span>
  <span class='@j_comp ivar id'>@j_comp</span><span class='dot token'>.</span><span class='exceptionHandler identifier id'>exceptionHandler</span><span class='lparen token'>(</span><span class='hndlr identifier id'>hndlr</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="execute-instance_method">
  
    - (<tt>Object</tt>) <strong>execute</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/main/ruby/core/composition.rb', line 158</span>

<span class='def def kw'>def</span> <span class='execute identifier id'>execute</span>
  <span class='@j_comp ivar id'>@j_comp</span><span class='dot token'>.</span><span class='execute identifier id'>execute</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="parallel-instance_method">
  
    - (<tt>Object</tt>) <strong>parallel</strong>(proc = nil, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/main/ruby/core/composition.rb', line 146</span>

<span class='def def kw'>def</span> <span class='parallel identifier id'>parallel</span><span class='lparen token'>(</span><span class='proc identifier id'>proc</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='block identifier id'>block</span> <span class='assign token'>=</span> <span class='proc identifier id'>proc</span> <span class='if if_mod kw'>if</span> <span class='proc identifier id'>proc</span>
  <span class='deff identifier id'>deff</span> <span class='assign token'>=</span> <span class='create_def identifier id'>create_def</span><span class='lparen token'>(</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@j_comp ivar id'>@j_comp</span><span class='dot token'>.</span><span class='parallel identifier id'>parallel</span><span class='lparen token'>(</span><span class='deff identifier id'>deff</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="series-instance_method">
  
    - (<tt>Object</tt>) <strong>series</strong>(proc = nil, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'src/main/ruby/core/composition.rb', line 152</span>

<span class='def def kw'>def</span> <span class='series identifier id'>series</span><span class='lparen token'>(</span><span class='proc identifier id'>proc</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='block identifier id'>block</span> <span class='assign token'>=</span> <span class='proc identifier id'>proc</span> <span class='if if_mod kw'>if</span> <span class='proc identifier id'>proc</span>
  <span class='deff identifier id'>deff</span> <span class='assign token'>=</span> <span class='create_def identifier id'>create_def</span><span class='lparen token'>(</span><span class='block identifier id'>block</span><span class='rparen token'>)</span>
  <span class='@j_comp ivar id'>@j_comp</span><span class='dot token'>.</span><span class='series identifier id'>series</span><span class='lparen token'>(</span><span class='deff identifier id'>deff</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Dec 15 18:49:03 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.8.7).
</div>

  </body>
</html>