<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0) on Mon Oct 10 13:16:05 BST 2011 -->
<title>Composer (Node.x Java API)</title>
<meta name="date" content="2011-10-10">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Composer (Node.x Java API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Composer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/nodex/java/core/composition/Composer.html" target="_top">Frames</a></li>
<li><a href="Composer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.nodex.java.core.composition</div>
<h2 title="Class Composer" class="title">Class Composer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.nodex.java.core.composition.Composer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Composer</span>
extends java.lang.Object</pre>
<div class="block"><p>Composer allows asynchronous control flows to be defined</p>

 <p>This is useful when you have some asynchronous actions to be performed <i>after</i> other actions have completed.
 In a asynchronous framework such as node.x you cannot just block on the result of one action before executing
 the next one, since an event loop thread must never block. By using Composer you can describe the execution order
 of a sequence of actions in a quasi-direct way, even though when they execute it will all be asynchronous.</p>
 <p>Each action to execute is represented by an instance of <a href="../../../../../org/nodex/java/core/Deferred.html" title="interface in org.nodex.java.core"><code>Deferred</code></a>. A Deferred represents an action
 which is yet to be executed. Instances of Deferred can represent any asynchronous action, e.g. copying a file from A to B,
 or getting a key from a Redis server.</p>
 <p>An example of using this class is as follows:</p>
 <pre>

 // d1..dn are instances of Deferred, returned from other node.x modules, e.g. <a href="../../../../../org/nodex/java/core/file/FileSystem.html" title="class in org.nodex.java.core.file"><code>FileSystem</code></a>

 Composer comp = new Composer();
 comp.parallel(d1);
 comp.parallel(d2);
 comp.parellel(d3);
 comp.series(d4);
 comp.parallel(d5);
 comp.series(d6);
 comp.series(d7);
 comp.parallel(d8);
 comp.parallel(d9);
 comp.execute();
 </pre>

 <p>In the above example, when <code>execute</code> is invoked, d1, d2, and d3 will be executed. When d1, d2, and d3
 have all completed, then d4 and d5 will be executed. When d4 and d5 have completed d6 will be executed.
 When d6 has completed d7, d8 and d9 will be executed. All this will occur asynchronous with no thread blocking for
 anything to complete.</p>

 <p>Here is another example which uses the return values from actions in subsequent actions:</p>

 <pre>
 Composer comp = new Composer();
 final Future&lt;Integer&gt; f = comp.parallel(d1)
 comp.series(new SimpleAction() {
   public void act() {
     System.out.println("Result of d1 is " + f.result);
   }
 }
 comp.execute();
 </pre>

 <p>In the above example, when execute is invoked d1 will be executed. When d1 completes the result of the action
 will be available in the <a href="../../../../../org/nodex/java/core/Future.html" title="interface in org.nodex.java.core"><code>Future</code></a> f, and the second action will be executed which simply displays the result.</p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd><a href="http://tfox.org">Tim Fox</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/nodex/java/core/composition/Composer.html#Composer()">Composer</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/nodex/java/core/composition/Composer.html#execute()">execute</a></strong>()</code>
<div class="block">Start executing any Deferred instances added to this composer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="../../../../../org/nodex/java/core/Future.html" title="interface in org.nodex.java.core">Future</a>&lt;T&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/nodex/java/core/composition/Composer.html#parallel(org.nodex.java.core.Deferred)">parallel</a></strong>(<a href="../../../../../org/nodex/java/core/Deferred.html" title="interface in org.nodex.java.core">Deferred</a>&lt;T&gt;&nbsp;deferred)</code>
<div class="block">Add a Deferred to be executed in parallel with any other Deferred instances added using this method since the
 last time (if any) the <a href="../../../../../org/nodex/java/core/composition/Composer.html#series(org.nodex.java.core.Deferred)"><code>series(org.nodex.java.core.Deferred&lt;T&gt;)</code></a> method was invoked.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="../../../../../org/nodex/java/core/Future.html" title="interface in org.nodex.java.core">Future</a>&lt;T&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/nodex/java/core/composition/Composer.html#series(org.nodex.java.core.Deferred)">series</a></strong>(<a href="../../../../../org/nodex/java/core/Deferred.html" title="interface in org.nodex.java.core">Deferred</a>&lt;T&gt;&nbsp;deferred)</code>
<div class="block">Adds a Deferred that will be executed after any other Deferred instances that were added to this Composer have
 completed.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Composer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Composer</h4>
<pre>public&nbsp;Composer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="parallel(org.nodex.java.core.Deferred)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parallel</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="../../../../../org/nodex/java/core/Future.html" title="interface in org.nodex.java.core">Future</a>&lt;T&gt;&nbsp;parallel(<a href="../../../../../org/nodex/java/core/Deferred.html" title="interface in org.nodex.java.core">Deferred</a>&lt;T&gt;&nbsp;deferred)</pre>
<div class="block">Add a Deferred to be executed in parallel with any other Deferred instances added using this method since the
 last time (if any) the <a href="../../../../../org/nodex/java/core/composition/Composer.html#series(org.nodex.java.core.Deferred)"><code>series(org.nodex.java.core.Deferred&lt;T&gt;)</code></a> method was invoked. All such Deferred instances will be executed only
 when there are no more Deferred instances that have not yet completed and were added before the last call to <code>series</code>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A Future representing the future result of the Deferred.</dd></dl>
</li>
</ul>
<a name="series(org.nodex.java.core.Deferred)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>series</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="../../../../../org/nodex/java/core/Future.html" title="interface in org.nodex.java.core">Future</a>&lt;T&gt;&nbsp;series(<a href="../../../../../org/nodex/java/core/Deferred.html" title="interface in org.nodex.java.core">Deferred</a>&lt;T&gt;&nbsp;deferred)</pre>
<div class="block">Adds a Deferred that will be executed after any other Deferred instances that were added to this Composer have
 completed.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A Future representing the future result of the Deferred.</dd></dl>
</li>
</ul>
<a name="execute()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>execute</h4>
<pre>public&nbsp;void&nbsp;execute()</pre>
<div class="block">Start executing any Deferred instances added to this composer. Any instances added with <a href="../../../../../org/nodex/java/core/composition/Composer.html#parallel(org.nodex.java.core.Deferred)"><code>parallel(org.nodex.java.core.Deferred&lt;T&gt;)</code></a> will
 be executed immediately until the first instance added with <a href="../../../../../org/nodex/java/core/composition/Composer.html#series(org.nodex.java.core.Deferred)"><code>series(org.nodex.java.core.Deferred&lt;T&gt;)</code></a> is encountered. Once all of those
 instances have completed then, the next "batch" of Deferred instances starting from instance added with <a href="../../../../../org/nodex/java/core/composition/Composer.html#series(org.nodex.java.core.Deferred)"><code>series(org.nodex.java.core.Deferred&lt;T&gt;)</code></a>
 up until the next instance added with <a href="../../../../../org/nodex/java/core/composition/Composer.html#series(org.nodex.java.core.Deferred)"><code>series(org.nodex.java.core.Deferred&lt;T&gt;)</code></a> will be executed. Once all of those have completed the next batch
 up until the next <a href="../../../../../org/nodex/java/core/composition/Composer.html#series(org.nodex.java.core.Deferred)"><code>series(org.nodex.java.core.Deferred&lt;T&gt;)</code></a> will be executed. This process will complete until all Deferred instances have been
 executed.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Composer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/nodex/java/core/composition/Composer.html" target="_top">Frames</a></li>
<li><a href="Composer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
