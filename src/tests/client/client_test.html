<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script src="http://cdn.sockjs.org/sockjs-0.1.min.js"></script>
    <script src="../../client/vertxbus.js"></script>
    <script type="text/javascript">

    </script>
</head>
<body>

<script type="text/javascript">
   var eb = new VertxBus("http://localhost:8080/sockjs-bridge");
   eb.onopen = function() {
       console.log('open');
   };
   eb.onclose = function() {
       console.log('close');
   };

   function send(address, message) {
     console.log("sending message to address " + address + " msg: " + message);
     eb.send(address, message);
   }

   function subscribe(address) {
     console.log("subscribing to address " + address)
     eb.registerHandler(address, function(msg) {
        alert("received message: " + msg);
     });
   }

</script>
<h2>Sending</h2><br><br>
<form onsubmit="return false;">
    <input type="text" name="address" value="someaddress" />
    <input type="text" name="message" value="Hello, World!"/>
    <input type="button" value="Send message" onclick="send(this.form.address.value, this.form.message.value)"/>
</form>

<br><br>

<h2>Subscribing</h2><br><br>

<form onsubmit="return false;">
    <input type="text" name="address" value="someaddress" />
    <input type="button" value="Subscribe" onclick="subscribe(this.form.address.value)"/>
</form>


</body>
</html>